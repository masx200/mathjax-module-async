{"version":3,"file":"index.js","sources":["../lib/defaultoptions.ts","../lib/cachepromise.ts","../lib/createObjectURLjavascript.ts","../lib/guid.ts","../lib/loadscript.ts","../lib/createfunction.ts","../lib/fetchsource.ts","../lib/preloadscript.ts","../lib/preloaded.ts","../lib/version.ts","../lib/mathjaxurl.ts","../lib/config.ts","../lib/configscript.ts","../lib/scriptstoload.ts","../lib/loadmodules.ts","../lib/loadmathjax.ts","../lib/initmathjax.ts","../lib/mathrenderfuns.ts","../lib/rendermath.ts"],"sourcesContent":["export const defaultoptions = {\n    containerWidth: 1261.3333740234375,\n    em: 16,\n    ex: 8.65,\n    family: \"\",\n    lineWidth: 1000000,\n    scale: 1.223133484162896,\n};\n","export function cachepromise<T extends (arg: any, ...rgs: any) => Promise<any>>(\n    fn: T\n): T {\n    const sourcecache = new Map();\n    return (async (key: any, ...rgs: any) => {\n        if (sourcecache.get(key)) {\n            return sourcecache.get(key);\n        }\n        const loadpro = fn(key, ...rgs);\n        sourcecache.set(key, loadpro);\n        return loadpro;\n    }) as T;\n}\n","export function createObjectURLjavascript(body: BlobPart) {\n    return URL.createObjectURL(\n        new Blob([body], { type: \"application/javascript\" })\n    );\n}\n","export function guid() {\n    return \"xxxxxxxxyxxxxyxxxyyxxxyxxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n        var r = (Math.random() * 16) | 0,\n            v = c == \"x\" ? r : (r & 3) | 8;\n        return v.toString(16);\n    });\n}\n","import { cachepromise } from \"./cachepromise\";\nexport const loadscript = cachepromise(async function (\n    src: string,\n    opts: any = {}\n) {\n    if (!src) {\n        throw new Error(\"src\");\n    }\n\n    return new Promise<void>((res, rej) => {\n        function clearsideeffect() {\n            try {\n                window.removeEventListener(\"error\", errorlistner);\n            } catch (error) {}\n\n            script.remove();\n            script.onload = script.onerror = null;\n        }\n        const errorlistner = (e: ErrorEvent) => {\n            rej(e.error);\n            clearsideeffect();\n        };\n        const script = document.createElement(\"script\");\n        Object.assign(script, opts, { async: true });\n        script.src = src;\n        script.onload = () => {\n            res();\n            clearsideeffect();\n        };\n        script.onerror = (e, s, l, c, r) => {\n            rej(\"string\" === typeof e ? e : r ? r : e);\n            clearsideeffect();\n        };\n        window.addEventListener(\"error\", errorlistner, { once: true });\n\n        document.head.appendChild(script);\n    });\n});\n","import { createObjectURLjavascript } from \"./createObjectURLjavascript\";\nimport { guid } from \"./guid\";\nimport { loadscript } from \"./loadscript\";\n\nexport async function createfunction(...args: string[]): Promise<Function> {\n    const funbody = args[args.length - 1];\n    const funargs = args.slice(0, args.length - 1);\n    const callbackname = \"function-\" + guid();\n    const scriptbody = `window['${callbackname}']=function(${funargs\n        // .map((n) => JSON.stringify(n))\n        .join(\"\\n,\\n\")}){\\n${funbody}\\n}`;\n    const scripturl = createObjectURLjavascript(scriptbody);\n    try {\n        await loadscript(scripturl);\n\n        return Reflect.get(window, callbackname) as Function;\n    } catch (error) {\n        throw error;\n    } finally {\n        URL.revokeObjectURL(scripturl);\n        Reflect.set(window, callbackname, undefined);\n    }\n}\n","import { cachepromise } from \"./cachepromise\";\n\nexport const fetchsource = cachepromise(async function (\n    url: string,\n    opts: any = {}\n) {\n    return fetch(url, opts)\n        .then((r) =>\n            r.ok ? r : Promise.reject(new Error(\"fetch failed:\" + url))\n        )\n        .then((r) => r.text());\n});\n","import { createObjectURLjavascript } from \"./createObjectURLjavascript\";\nimport { preloaded } from \"./preloaded\";\n\nexport const preloadscript = createObjectURLjavascript(getmathjaxafter());\nfunction getmathjaxafter() {\n    return `\nMathJax.loader.preLoad(${preloaded.map((a) => JSON.stringify(a)).join(\",\")})\n    `;\n}\n// console.log(getmathjaxafter());\n","//1470.11kb\nexport const preloaded = [\n    \"startup\",\n    \"[tex]/action\",\n    \"[tex]/all-packages\",\n    \"[tex]/ams\",\n    \"[tex]/amscd\",\n    \"[tex]/bbox\",\n    \"[tex]/boldsymbol\",\n    \"[tex]/braket\",\n    \"[tex]/bussproofs\",\n    \"[tex]/cancel\",\n    \"[tex]/cases\",\n    \"[tex]/centernot\",\n    \"[tex]/color\",\n    \"[tex]/colortbl\",\n    \"[tex]/colorv2\",\n    \"[tex]/configmacros\",\n    \"[tex]/empheq\",\n    \"[tex]/enclose\",\n    \"[tex]/extpfeil\",\n    \"[tex]/gensymb\",\n    \"[tex]/html\",\n    \"[tex]/mathtools\",\n    \"[tex]/mhchem\",\n    \"[tex]/newcommand\",\n    \"[tex]/noerrors\",\n    \"[tex]/noundefined\",\n    \"[tex]/physics\",\n    \"[tex]/require\",\n    \"[tex]/setoptions\",\n    \"[tex]/tagformat\",\n    \"[tex]/textcomp\",\n    \"[tex]/textmacros\",\n    \"[tex]/unicode\",\n    \"[tex]/upgreek\",\n    \"[tex]/verb\",\n    \"core\",\n    \"input/asciimath\",\n    \"input/mml\",\n    \"input/tex-base\",\n    \"input/tex-full\",\n    \"loader\",\n    \"output/chtml\",\n    \"output/chtml/fonts/tex\",\n];\n","export const version = \"3.2.0\";\n","import { version } from \"./version.js\";\n\nexport const mathjaxbase = `https://cdn.jsdelivr.net/npm/mathjax@${version}/es5`;\n","import { mathjaxbase } from \"./mathjaxurl.js\";\nconst config = {\n    startup: { typeset: false },\n    loader: {\n        load: [\n            // \"input/asciimath\",\n            // \"output/chtml\",\n            // \"input/tex-full\",\n            // \"input/mml\",\n        ],\n        paths: {\n            mathjax: mathjaxbase,\n        },\n    },\n};\nexport { config };\n","import { config } from \"./config\";\n\nexport const configscript = URL.createObjectURL(\n    new Blob([getmathjaxafter()], { type: \"application/javascript\" })\n);\nfunction getmathjaxafter() {\n    return `\nwindow.MathJax=${JSON.stringify(config)}\n    `;\n}\n","import { preloadscript } from \"./preloadscript\";\nimport { configscript } from \"./configscript\";\nimport { mathjaxbase } from \"./mathjaxurl\";\n\n// export const mathjaxurl = mathjaxbase + \"/\" + `tex-mml-chtml.min.js`;\n//2281.69kb\nconst mathjaxmodules = [\n    \"core\",\n    \"input/asciimath\",\n    \"output/chtml\",\n    \"input/tex-full\",\n    \"input/mml\",\n    \"output/chtml/fonts/tex\",\n];\nconst mathjaxurls = mathjaxmodules.map(getrealmoduleurl);\nexport const scriptstoload = [\n    configscript,\n\n    getrealmoduleurl(\"startup\"),\n    preloadscript,\n    ...mathjaxurls,\n];\n\nfunction getrealmoduleurl(value: string): string {\n    return mathjaxbase + \"/\" + value + \".min.js\";\n}\n// console.log(scriptstoload);\n","import { createfunction } from \"./createfunction\";\nimport { fetchsource } from \"./fetchsource\";\nimport { scriptstoload } from \"./scriptstoload\";\n\nexport async function loadmodules(): Promise<Record<string, any>> {\n    const scriptscontent = await Promise.all(\n        scriptstoload.map((u) => fetchsource(u))\n    );\n    // console.log(scriptscontent);\n\n    const scriptbody = scriptscontent.join(\"\\n;\\n\");\n    // console.log(scriptbody);\n\n    let MathJax: Record<string, any> = {};\n    const fake = {\n        get MathJax() {\n            return MathJax;\n        },\n        set MathJax(value) {\n            MathJax = value;\n        },\n    };\n    const global = new Proxy(window, {\n        get(t, p, r) {\n            const value =\n                Reflect.get(fake, p, fake) || Reflect.get(window, p, window);\n            if (typeof value === \"function\") {\n                return value.bind(window);\n            } else {\n                return value;\n            }\n        },\n\n        has(t, p) {\n            return Reflect.has(t, p) || Reflect.has(fake, p);\n        },\n        set(t, p, v, r) {\n            return Reflect.set(fake, p, v, fake);\n        },\n        ownKeys(t) {\n            return Array.from(\n                new Set([...Reflect.ownKeys(t), ...Reflect.ownKeys(fake)])\n            );\n        },\n        defineProperty(t, p, a) {\n            return Reflect.defineProperty(fake, p, a);\n        },\n\n        deleteProperty(t, p) {\n            return Reflect.deleteProperty(fake, p);\n        },\n    });\n\n    const proxymathjax = new Proxy(\n        {},\n        {\n            get(t, p, r) {\n                return Reflect.get(MathJax, p, MathJax);\n            },\n            set(t, p, v, r) {\n                return Reflect.set(MathJax, p, v, MathJax);\n            },\n            has(t, p) {\n                return Reflect.has(MathJax, p);\n            },\n            ownKeys(t) {\n                return Reflect.ownKeys(MathJax);\n            },\n            defineProperty(t, p, a) {\n                return Reflect.defineProperty(MathJax, p, a);\n            },\n\n            deleteProperty(t, p) {\n                return Reflect.deleteProperty(MathJax, p);\n            },\n        }\n    );\n    const equalglobals = [\n        \"self\",\n        \"frames\",\n        \"parent\",\n        \"content\",\n        \"window\",\n        \"top\",\n        \"globalThis\",\n    ];\n    const likewindow = Object.fromEntries(\n        equalglobals\n            // Reflect.ownKeys(window)\n            //     .filter((k) => Object.is(window, Reflect.get(window, k)))\n            .map((k) => [k, global])\n    );\n    // three global variables are accidentally defined\n    //https://github.com/mathjax/MathJax/issues/2748\n    const accidentallyvariables = {\n        value: undefined,\n        mathfontfamily: undefined,\n        mathfontsize: undefined,\n    };\n    const scope = Object.assign(\n        accidentallyvariables,\n        { MathJax: proxymathjax },\n        likewindow\n    );\n    const argskey = Object.keys(scope);\n    const argsvalue = Object.values(scope);\n    const fun = await createfunction(...argskey, scriptbody);\n    // const fun = new Function(...argskey, scriptbody);\n    Reflect.apply(fun, global, argsvalue);\n    // console.info.call(console, global);\n    return MathJax;\n}\n","// import { config } from \"./config.js\";\n//import { loadsheet } from \"./loadsheet.js\";\n//import { mathjaxcss } from \"./mathjaxcss.js\";\n// function setmathjaxconfig() {\n//     if (window.MathJax) {\n//         return;\n//     }\n//     window.MathJax = config;\n// }\nimport { cachepromise } from \"./cachepromise\";\nimport { loadmodules } from \"./loadmodules\";\nexport const loadmathjax = cachepromise(async function () {\n    //  await loadsheet(mathjaxcss);\n    return loadmodules();\n});\n","import { loadmathjax } from \"./loadmathjax.js\";\nlet MathJaxcache: Record<string, any> | undefined;\nexport async function initmathjax() {\n    if (MathJaxcache) {\n        return MathJaxcache;\n    }\n    const MathJax = await loadmathjax();\n    await MathJax.startup.promise;\n    MathJaxcache = MathJax;\n    return MathJax;\n}\n","export const mathrenderfuns: Record<string, string | undefined> = {\n    latex: \"tex2chtmlPromise\",\n    asciimath: \"asciimath2chtmlPromise\",\n    mathml: \"mathml2chtmlPromise\",\n};\n","import { defaultoptions } from \"./defaultoptions\";\nimport { initmathjax } from \"./initmathjax.js\";\nimport { mathrenderfuns } from \"./mathrenderfuns\";\nexport type MathjaxInputType = \"latex\" | \"mathml\" | \"asciimath\";\nexport async function rendermath(\n    input: string,\n    type: MathjaxInputType,\n    opts: Partial<Record<string, any> & typeof defaultoptions> = {}\n): Promise<string> {\n    const container: HTMLElement = document.createElement(\"div\");\n\n    const renderfun = mathrenderfuns[type];\n\n    if (!renderfun) {\n        throw new Error(\"mathtype\" + ` \"latex\" | \"mathml\" | \"asciimath\"`);\n    }\n    const MathJax = await initmathjax();\n    const mathjax = MathJax;\n    mathjax.startup.document.addStyleSheet();\n    const options = Object.assign({}, defaultoptions, opts);\n\n    const node = await Reflect.apply(Reflect.get(MathJax, renderfun), MathJax, [\n        input.trim(),\n        options,\n    ]);\n\n    container.appendChild(node);\n\n    MathJax.startup.document.clear();\n    MathJax.startup.document.updateDocument();\n\n    return container.innerHTML;\n}\n"],"names":["defaultoptions","containerWidth","em","ex","family","lineWidth","scale","cachepromise","fn","sourcecache","Map","_ref","_asyncToGenerator","regeneratorRuntime","mark","key","_len","rgs","_key","loadpro","_args","arguments","wrap","_context","prev","next","get","abrupt","length","Array","apply","concat","set","stop","_callee","_x","this","createObjectURLjavascript","body","URL","createObjectURL","Blob","type","guid","replace","c","r","Math","random","toString","loadscript","src","opts","Error","Promise","res","rej","clearsideeffect","window","removeEventListener","errorlistner","error","script","remove","onload","onerror","e","document","createElement","Object","assign","async","s","l","addEventListener","once","head","appendChild","createfunction","_createfunction","args","funbody","funargs","callbackname","scriptbody","scripturl","slice","join","Reflect","t0","revokeObjectURL","undefined","finish","fetchsource","url","fetch","then","ok","reject","text","preloadscript","map","a","JSON","stringify","mathjaxbase","version","config","startup","typeset","loader","load","paths","mathjax","configscript","mathjaxurls","getrealmoduleurl","scriptstoload","_toConsumableArray","value","loadmodules","_loadmodules","scriptscontent","MathJax","fake","global","proxymathjax","equalglobals","likewindow","accidentallyvariables","scope","argskey","argsvalue","fun","all","u","sent","Proxy","t","p","bind","has","v","ownKeys","from","Set","defineProperty","deleteProperty","fromEntries","k","mathfontfamily","mathfontsize","keys","values","MathJaxcache","loadmathjax","initmathjax","_initmathjax","promise","mathrenderfuns","latex","asciimath","mathml","rendermath","_x2","_rendermath","input","container","renderfun","options","node","addStyleSheet","trim","clear","updateDocument","innerHTML"],"mappings":"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"}